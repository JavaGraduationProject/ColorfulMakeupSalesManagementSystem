webpackJsonp([23],{"1r0B":function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=r("mvHQ"),t=r.n(o),n=r("X2Oc"),a={data:function(){return{userInfo:JSON.parse(localStorage.getItem("userdata")),formCustom:{realName:"",gender:"",phone:"",passwordQuestion:"",passwordHintAnswer:""},ruleCustom:{realName:[{validator:function(e,s,r){""===s?r(new Error("请输入用户昵称")):r()},trigger:"blur"}],phone:[{validator:function(e,s,r){""===s?r(new Error("请输入11位手机号")):/^[1][3,4,5,7,8][0-9]{9}$/.test(s)?r():r(new Error("手机号格式错误"))},trigger:"blur"}],passwordQuestion:[{validator:function(e,s,r){""===s?r(new Error("请输入密码问题")):r()},trigger:"blur"}],passwordHintAnswer:[{validator:function(e,s,r){""===s?r(new Error("请输入密码答案")):r()},trigger:"blur"}]}}},methods:{handleSubmit:function(e){var s=this;this.$refs[e].validate(function(e){if(e){console.log(12123143);var r={},o={},a=s.formCustom;o.id=s.userInfo.id,s.userInfo.passwordQuestion?(o.passwordQuestion=s.userInfo.passwordQuestion,o.passwordHintAnswer=s.userInfo.passwordHintAnswer):(o.passwordQuestion=a.passwordQuestion,o.passwordHintAnswer=a.passwordHintAnswer),o.realName=a.realName,o.gender=a.gender,o.mobile=a.phone,r.send=o,r.url="customer/updateInfo",Object(n.a)(r,function(e){100==e.code?(s.userInfo.realName=a.realName,s.userInfo.gender=a.gender,s.userInfo.passwordQuestion||(s.userInfo.passwordQuestion=a.passwordQuestion,s.userInfo.passwordHintAnswer=a.passwordHintAnswer),localStorage.setItem("userdata",t()(s.userInfo)),s.$Message.success("保存成功!")):s.$Message.error("网络超时，请重试！")})}else s.$Message.error("表单不能为空!")})},handleReset:function(e){this.$refs[e].resetFields()}},mounted:function(){this.formCustom.realName=this.userInfo.realName,this.formCustom.gender=this.userInfo.gender,this.formCustom.phone=this.userInfo.mobile}},u={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("div",{staticClass:"top-title"},[e._v(" 您的个人资料")]),e._v(" "),r("div",{staticClass:"acc-p"},[r("p",[e._v("亲爱的"+e._s(e.userInfo.userName)+"，填写真实的资料，有助于好友找到你哦。")]),e._v(" "),r("div",{staticClass:"center-box"},[e._v("\n        会员名： "+e._s(e.userInfo.userName)+"\n      ")]),e._v(" "),r("div",{staticClass:"center-box"},[r("Form",{ref:"formCustom",staticClass:"form",attrs:{model:e.formCustom,rules:e.ruleCustom,"label-width":80,"label-position":"left"}},[r("FormItem",{attrs:{label:"昵称:",prop:"realName"}},[r("Input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.formCustom.realName,callback:function(s){e.$set(e.formCustom,"realName",s)},expression:"formCustom.realName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"性别："}},[r("RadioGroup",{model:{value:e.formCustom.gender,callback:function(s){e.$set(e.formCustom,"gender",s)},expression:"formCustom.gender"}},[r("Radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("Radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),r("FormItem",{attrs:{label:"手机号：",prop:"phone"}},[r("Input",{attrs:{contenteditable:"",placeholder:"请输入手机号"},model:{value:e.formCustom.phone,callback:function(s){e.$set(e.formCustom,"phone",s)},expression:"formCustom.phone"}})],1),e._v(" "),e.userInfo.passwordQuestion?e._e():r("div",[r("FormItem",{attrs:{label:"密保问题：",prop:"passwordQuestion"}},[r("Input",{attrs:{contenteditable:"",placeholder:"请输入密保问题"},model:{value:e.formCustom.passwordQuestion,callback:function(s){e.$set(e.formCustom,"passwordQuestion",s)},expression:"formCustom.passwordQuestion"}})],1),e._v(" "),r("FormItem",{attrs:{label:"密保答案：",prop:"passwordHintAnswer"}},[r("Input",{attrs:{contenteditable:"",placeholder:"请输入密保答案"},model:{value:e.formCustom.passwordHintAnswer,callback:function(s){e.$set(e.formCustom,"passwordHintAnswer",s)},expression:"formCustom.passwordHintAnswer"}})],1)],1)],1)],1)]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"btn"},[r("Button",{attrs:{type:"warning"},on:{click:function(s){return e.handleSubmit("formCustom")}}},[e._v("保存")]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:function(s){return e.handleReset("formCustom")}}},[e._v("重置")])],1)])},staticRenderFns:[]};var i=r("VU/8")(a,u,!1,function(e){r("ZMMX")},"data-v-1c7e2d45",null);s.default=i.exports},ZMMX:function(e,s){}});
//# sourceMappingURL=23.a91417682577bee22fec.js.map