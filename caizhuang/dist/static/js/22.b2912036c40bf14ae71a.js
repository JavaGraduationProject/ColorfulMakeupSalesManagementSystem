webpackJsonp([22],{"4EgW":function(t,e){},FzsE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("mvHQ"),r=s.n(o),n=s("Dd8w"),a=s.n(n),l=s("NYxO"),u=s("X2Oc"),c={data:function(){var t=this;return{userInfo:JSON.parse(localStorage.getItem("userdata")),formCustom:{oldPsw:"",newPsw:"",checkPsw:""},ruleCustom:{oldPsw:[{validator:function(t,e,s){""===e||e.length<6?s(new Error("密码不能为空，且密码不能少于6位")):s()},trigger:"blur"}],newPsw:[{validator:function(e,s,o){""===s||s.length<6?o(new Error("密码不能为空，且密码不能少于6位")):(""!==t.formCustom.checkPsw&&t.$refs.formCustom.validateField("checkPsw"),o())},trigger:"blur"}],checkPsw:[{validator:function(e,s,o){""===s||s.length<6?o(new Error("密码不能为空，且密码不能少于6位")):s!==t.formCustom.newPsw?o(new Error("两次输入的密码不一致！！")):o()},trigger:"blur"}]}}},methods:a()({},Object(l.b)(["signOut"]),{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){console.log(123);var s={},o={},n=e.formCustom;o.id=e.userInfo.id,o.oldPsw=n.oldPsw,o.password=n.newPsw,s.send=o,console.log(s),s.url="customer/updatePsw",Object(u.a)(s,function(t){100==t.code?(e.userInfo.password=n.newPsw,localStorage.setItem("userdata",r()(e.userInfo)),e.$Message.success("修改成功!请重新登录"),e.logout()):e.$Message.error("旧密码不对，请重新输入")})}else e.$Message.error("表单不能为空!")})},handleReset:function(t){this.$refs[t].resetFields()},logout:function(){this.signOut(),this.$router.push("/")}})},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top-title"},[t._v(" 修改密码")]),t._v(" "),s("div",{staticClass:"acc-p"},[s("p",[t._v("设置一个包含数字和字母，长度超过6位以上的密码")]),t._v(" "),s("div",{staticClass:"center-box"},[s("Form",{ref:"formCustom",staticClass:"form",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-width":80,"label-position":"left"}},[s("FormItem",{attrs:{label:"旧密码:",prop:"oldPsw"}},[s("Input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:t.formCustom.oldPsw,callback:function(e){t.$set(t.formCustom,"oldPsw",e)},expression:"formCustom.oldPsw"}})],1),t._v(" "),s("FormItem",{attrs:{label:"新密码：",prop:"newPsw"}},[s("Input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:t.formCustom.newPsw,callback:function(e){t.$set(t.formCustom,"newPsw",e)},expression:"formCustom.newPsw"}})],1),t._v(" "),s("FormItem",{attrs:{label:"确认密码:",prop:"checkPsw"}},[s("Input",{attrs:{placeholder:"请再次输入密码",type:"password"},model:{value:t.formCustom.checkPsw,callback:function(e){t.$set(t.formCustom,"checkPsw",e)},expression:"formCustom.checkPsw"}})],1)],1)],1),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"btn"},[s("Button",{attrs:{type:"warning"},on:{click:function(e){return t.handleSubmit("formCustom")}}},[t._v("保存")]),t._v(" "),s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleReset("formCustom")}}},[t._v("重置")])],1)])])},staticRenderFns:[]};var m=s("VU/8")(c,i,!1,function(t){s("4EgW")},"data-v-2b1886ea",null);e.default=m.exports}});
//# sourceMappingURL=22.b2912036c40bf14ae71a.js.map