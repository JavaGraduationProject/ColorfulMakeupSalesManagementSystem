webpackJsonp([4],{"+Z2V":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("X2Oc"),i={props:{b:{type:String,default:"0"}},data:function(){return{allchose:!1,show:!1,logisticscore:0,shopscore:0,goodscore:0,imgData:"",imgchoseList:[],imgName:"",visible:!1,uploadList:[],strs:[],modalForm:{},modal5:!1,temfielPath:"http://localhost:8089/img/",hp:s("/59Y"),zp:s("8Env"),cp:s("V2KC"),imgUrl:s("ujvZ"),degree:"",degreelist:[{value:"all",label:"评价"},{value:"0",label:"好评"},{value:"1",label:"中评"},{value:"2",label:"差评"}],userInfo:JSON.parse(localStorage.getItem("userdata")),total:0,listQuery:{page:1,limit:10},reviewList:[]}},mounted:function(){},created:function(){1==this.b?this.getAllReview():2==this.b&&this.getBgReview()},methods:{getBgReview:function(){var e=this,t={},s={};s.userId=this.userInfo.id,this.degree&&(s.degree=this.degree),"all"==this.degree&&(s.degree=null),console.log(s),s.pageSize=this.listQuery.limit,s.pageNum=this.listQuery.page,t.send=s,t.url="review/reviewByBg",Object(o.b)(t,function(t){if(console.log(t),100==t.code){e.total=t.extend.pageInfo.total;var s=t.extend.pageInfo.list;e.reviewList=s,console.log(e.reviewList)}})},choseAll:function(){this.allchose=!this.allchose,this.allchose?this.reviewList.forEach(function(e){e.choseItem=!0}):this.reviewList.forEach(function(e){e.choseItem=!1})},choseItem:function(e){e.choseItem=!e.choseItem},doAction:function(){console.log("212"),this.show=!this.show},modalOk:function(e){var t=this;console.log(e);var s=(new Date).getTime(),i={},a={};a.id=e.id,a.degree=e.degree,a.content=e.content,a.img=this.imgchoseList.join(","),a.createTime=s,a.goodscore=this.goodscore,a.shopscore=this.shopscore,a.logisticscore=this.logisticscore,console.log(a),i.send=a,i.url="review/updateReview",Object(o.a)(i,function(e){100==e.code&&(t.$Message.success("修改成功"),t.$router.back())})},modalCancel:function(){this.modal5=!1},handleView:function(e){console.log(e),this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.uploadList;this.uploadList.splice(t.indexOf(e),1),this.imgchoseList.splice(this.imgchoseList.indexOf(e.response.extend.imgData),1),console.log(this.imgchoseList)},handleSuccess:function(e,t){console.log(t),console.log(this.uploadList),this.uploadList.push(t);var s=[];s.push(t.response.extend.imgData),console.log("图片上传列表"+s),this.imgchoseList=s.concat(this.imgchoseList),console.log(this.imgchoseList)},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式 "+e.name+" 不正确的，请选择jpg或者png文件."})},handleMaxSize:function(e){this.$Notice.warning({title:"图片大小",desc:"图片  "+e.name+" 太大了，最多不能超过2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:"最多可以上传5张图片"}),e},openModal:function(e){var t=this;if(console.log(e),this.modalForm=e,this.goodscore=parseInt(this.modalForm.goodscore),this.logisticscore=parseInt(this.modalForm.logisticscore),this.shopscore=parseInt(this.modalForm.logisticscore),this.imgData=e.img,this.imgData){console.log("hshdsfsd");var s=new Array;(s=this.imgData.split(",")).forEach(function(e){t.imgchoseList.push(e)});var o=[];s.forEach(function(e,t){var s={status:"finished",response:{}};s.response.extend={},s.response.extend.imgData=e,o.push(s)}),this.uploadList=o,console.log(this.uploadList.length)}this.modal5=!this.modal5},getAllReview:function(){var e=this,t={},s={};s.userId=this.userInfo.id,this.degree&&(s.degree=this.degree),"all"==this.degree&&(s.degree=null),s.pageSize=this.listQuery.limit,s.pageNum=this.listQuery.page,t.send=s,console.log(s),t.url="review/showReview",Object(o.b)(t,function(t){if(console.log(t),100==t.code){e.total=t.extend.pageInfo.total;var s=t.extend.pageInfo.list;s.forEach(function(e){e.choseItem=!1;var t=e.img;if(t){var s=new Array;s=t.split(","),e.strs=s}}),e.reviewList=s}})},goNext:function(e){this.listQuery.page=e,this.getAllReview()},getSizeNext:function(e){this.listQuery.limit=e,this.getAllReview()},change:function(e){console.log(e),this.degree=e,1==this.b?this.getAllReview():2==this.b&&this.getBgReview()}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1==e.b?s("div",{staticClass:"action",on:{click:e.doAction}},[e._v("批量管理")]):e._e(),e._v(" "),1==e.b&&1==e.show?s("div",{staticClass:"action",on:{click:function(e){}}},[e._v("删除")]):e._e(),e._v(" "),1==e.b&&1==e.show?s("div",{staticClass:"action",on:{click:e.choseAll}},[e._v("全选")]):e._e(),e._v(" "),1==e.b&&1==e.show?s("div",{staticClass:"action",on:{click:function(e){}}},[e._v("清空评价")]):e._e(),e._v(" "),s("table",{staticClass:"tb-rate-table thm-list "},[e._m(0),e._v(" "),s("thead",[s("tr",{staticClass:"bg-tr"},[s("th",{staticClass:"align-c"},[s("i-select",{staticStyle:{width:"80px"},attrs:{size:"small"},on:{"on-change":e.change},model:{value:e.degree,callback:function(t){e.degree=t},expression:"degree"}},e._l(e.degreelist,function(t){return s("i-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),s("th"),e._v(" "),1==e.b?s("th",[e._v("被评价人")]):e._e(),e._v(" "),2==e.b?s("th",[e._v("评价人")]):e._e(),e._v(" "),s("th",[e._v("宝贝信息")]),e._v(" "),s("th",{staticClass:"align-c"},[e._v("操作")])])]),e._v(" "),s("tbody",[0==e.reviewList.length?s("tr",[s("td"),e._v(" "),s("td",{staticStyle:{"margin-left":"80px"}},[e._v("暂时没有相关评价哦~~")])]):e._e(),e._v(" "),e._l(e.reviewList,function(t,o){return s("tr",{key:o},[0==t.degree?s("td",{staticClass:"align-c"},[1==e.show?s("span",{class:t.choseItem?"mark":"",on:{click:function(s){return e.choseItem(t)}}},[s("Icon",{attrs:{type:"md-checkmark"}})],1):e._e(),e._v(" "),s("img",{attrs:{src:e.hp}})]):e._e(),e._v(" "),1==t.degree?s("td",{staticClass:"align-c"},[1==e.show?s("span",{class:t.choseItem?"mark":"",on:{click:function(s){return e.choseItem(t)}}},[s("Icon",{attrs:{type:"md-checkmark"}})],1):e._e(),e._v(" "),s("img",{attrs:{src:e.zp}})]):e._e(),e._v(" "),2==t.degree?s("td",{staticClass:"align-c"},[1==e.show?s("span",{class:t.choseItem?"mark":"",on:{click:function(s){return e.choseItem(t)}}},[s("Icon",{attrs:{type:"md-checkmark"}})],1):e._e(),e._v(" "),s("img",{attrs:{src:e.cp}})]):e._e(),e._v(" "),s("td",[s("p",{staticClass:"comment"},[e._v("评语："+e._s(t.content))]),e._v(" "),t.strs?s("ul",{staticClass:"photos"},e._l(t.strs,function(t,o){return s("li",{key:o},[s("img",{staticClass:"img-40",attrs:{src:e.temfielPath+"review/"+t}})])}),0):e._e(),e._v(" "),s("p",{staticClass:"date"},[e._v("["+e._s(t.createTime)+"]")]),e._v(" "),t.replyContent?s("div",[s("p",{staticClass:"reply-text"},[e._v("[掌柜回复]："+e._s(t.replyContent))]),e._v(" "),s("p",{staticClass:"date"},[e._v("["+e._s(t.replyTime)+"]")])]):e._e()]),e._v(" "),s("td",[e._v("卖家：XX彩妆")]),e._v(" "),s("td",{staticClass:"new-a"},[t.goods?s("p",[s("router-link",{attrs:{target:"_blank",to:{path:"/goodsDetail",query:{goodsId:t.goodsId}}}},[e._v(e._s(t.goods.description))])],1):e._e(),e._v(" "),t.goods?s("p",{staticClass:"price"},[e._v(e._s(t.goods.sellPrice)+"元")]):e._e()]),e._v(" "),s("td",[1==e.b&&1==t.degree||2==t.degree?s("div",{staticClass:"btn1"},[s("Button",{attrs:{size:"small"},on:{click:function(s){return e.openModal(t)}}},[e._v("修改评价")]),e._v(" "),s("Button",{attrs:{size:"small"}},[e._v("删除评价")])],1):e._e()])])})],2)]),e._v(" "),s("div",{staticClass:"goods-page"},[s("Page",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,"page-size":e.listQuery.limit,current:e.listQuery.page,"show-elevator":"","show-total":"",placement:"bottom","show-sizer":""},on:{"update:pageSize":function(t){return e.$set(e.listQuery,"limit",t)},"update:page-size":function(t){return e.$set(e.listQuery,"limit",t)},"update:current":function(t){return e.$set(e.listQuery,"page",t)},"on-change":e.goNext,"on-page-size-change":e.getSizeNext}})],1),e._v(" "),s("Modal",{attrs:{title:"修改评价",width:"900px"},model:{value:e.modal5,callback:function(t){e.modal5=t},expression:"modal5"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"top-content"},[s("div",{staticClass:"item-rate-info"},[s("div",{staticClass:"item-detail"},[s("a",{staticClass:"item-d-img"},[e.modalForm.goods?s("img",{attrs:{src:e.temfielPath+e.modalForm.goods.picture}}):e._e()]),e._v(" "),s("div",{staticClass:"item-title"},[e.modalForm.goods?s("a",[e._v(e._s(e.modalForm.goods.description))]):e._e()]),e._v(" "),s("div",[e._v("颜色分类:默认")]),e._v(" "),s("div",[e._v("尺码:"+e._s(e.modalForm.goodsSize))])])]),e._v(" "),s("div",{staticClass:"item-rate-main"},[s("div",{staticStyle:{"margin-top":"10px",padding:"10px",display:"flex","flex-direction":"row"}},[s("RadioGroup",{staticStyle:{"min-width":"200px"},model:{value:e.modalForm.degree,callback:function(t){e.$set(e.modalForm,"degree",t)},expression:"modalForm.degree"}},[s("Radio",{attrs:{label:"0"}},[s("span",[s("img",{attrs:{src:e.hp}})])]),e._v(" "),s("Radio",{attrs:{label:"1"}},[s("span",[s("img",{attrs:{src:e.zp}})])]),e._v(" "),s("Radio",{attrs:{label:"2"}},[s("span",[s("img",{attrs:{src:e.cp}})])])],1),e._v(" "),0==e.modalForm.degree?s("div",[e._v("亲，好评无法修改和删除，请验货后再对商品和购物感受做出评论。")]):e._e(),e._v(" "),1==e.modalForm.degree||2==e.modalForm.degree?s("div",[e._v("亲，很抱歉没能给您带来良好的购物体验，如有不满，您可联系卖家协商或发起售后维权")]):e._e()],1),e._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"review-content"},[s("Input",{attrs:{type:"textarea",rows:4,placeholder:"亲，每个漂亮的女生都拥有一件连衣裙，你也有很多款吧，写点评把你喜欢的连衣裙分享给同样美丽的女子"},model:{value:e.modalForm.content,callback:function(t){e.$set(e.modalForm,"content",t)},expression:"modalForm.content"}}),e._v(" "),s("div",{staticStyle:{display:"flex","flex-direction":"row"}},[s("div",{staticClass:"shaitu"},[s("Icon",{attrs:{type:"ios-film-outline"}}),e._v("晒图")],1),e._v(" "),s("span",{staticStyle:{"padding-left":"20px","padding-top":"10px"}},[e._v("最多只能上传5张图片哦~")])]),e._v(" "),s("div",{staticStyle:{"margin-top":"10px","margin-left":"5px"}},[e._l(e.uploadList,function(t){return 0!=e.uploadList.length?s("div",{staticClass:"demo-upload-list"},["finished"===t.status?[s("img",{attrs:{src:e.temfielPath+"review/"+t.response.extend.imgData}}),e._v(" "),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){return e.handleView(t.response.extend.imgData)}}}),e._v(" "),s("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){return e.handleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2):e._e()}),e._v(" "),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"http://localhost:8089/hf/review/upload"}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),s("Modal",{attrs:{title:"查看大图"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:e.temfielPath+"review/"+e.imgName}}):e._e()])],2)],1)])])]),e._v(" "),s("div",{staticClass:"ses-content"},[s("div",{staticClass:"ses-title"},[e._v("\n                  店铺动态评分\n              ")]),e._v(" "),s("div",{staticClass:"ses-degree"},[s("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("宝贝与描述相符  "),s("Rate",{attrs:{"show-text":"",type:"number"},model:{value:e.goodscore,callback:function(t){e.goodscore=t},expression:"goodscore"}}),e._v(" "),1==e.modalForm.goodscore?s("span",[e._v("- 差得太离谱，与卖家描述的严重不符，非常不满")]):e._e(),e._v(" "),2==e.modalForm.goodscore?s("span",[e._v("- 部分有破损，与卖家描述的不符，不满意")]):e._e(),e._v(" "),3==e.modalForm.goodscore?s("span",[e._v("- 质量一般，没有卖家描述的那么好")]):e._e(),e._v(" "),4==e.modalForm.goodscore?s("span",[e._v(" - 质量不错，与卖家描述的基本一致，还是挺满意的")]):e._e(),e._v(" "),5==e.modalForm.goodscore?s("span",[e._v(" - 质量非常好，与卖家描述的完全一致，非常满意")]):e._e()],1),e._v(" "),s("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("卖家的服务态度  "),s("Rate",{attrs:{"show-text":""},model:{value:e.shopscore,callback:function(t){e.shopscore=t},expression:"shopscore"}}),e._v(" "),1==e.modalForm.shopscore?s("span",[e._v("- 卖家态度很差，还骂人、说脏话，简直不把顾客当回事")]):e._e(),e._v(" "),2==e.modalForm.shopscore?s("span",[e._v("- 卖家有点不耐烦，承诺的服务也兑现不了")]):e._e(),e._v(" "),3==e.modalForm.shopscore?s("span",[e._v("- 卖家回复问题很慢，态度一般，谈不上沟通顺畅")]):e._e(),e._v(" "),4==e.modalForm.shopscore?s("span",[e._v("卖家服务挺好的，沟通挺顺畅的，总体满意")]):e._e(),e._v(" "),5==e.modalForm.shopscore?s("span",[e._v("- 卖家的服务太棒了，考虑非常周到，完全超出期望值")]):e._e()],1),e._v(" "),s("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("物流服务的质量  "),s("Rate",{attrs:{"show-text":""},model:{value:e.logisticscore,callback:function(t){e.logisticscore=t},expression:"logisticscore"}}),e._v(" "),1==e.modalForm.logisticscore?s("span",[e._v("- 到货速度严重延误，货物破损，派件员态度恶劣")]):e._e(),e._v(" "),2==e.modalForm.logisticscore?s("span",[e._v("- 到货速度慢，外包装严重变形，派件员不耐烦，态度差")]):e._e(),e._v(" "),3==e.modalForm.logisticscore?s("span",[e._v("- 到货速度一般，外包装变形，派件员态度一般")]):e._e(),e._v(" "),4==e.modalForm.logisticscore?s("span",[e._v("- 到货速度及时，派件员态度较好")]):e._e(),e._v(" "),5==e.modalForm.logisticscore?s("span",[e._v("- 到货速度非常快，商品完好无损，派件员态度很好")]):e._e()],1)])])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.modalCancel}},[e._v("取消")]),e._v(" "),s("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.modalOk(e.modalForm)}}},[e._v("确定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("colgroup",[t("col",{attrs:{width:"80px"}}),this._v(" "),t("col"),this._v(" "),t("col",{attrs:{width:"150px"}}),this._v(" "),t("col",{attrs:{width:"150px"}}),this._v(" "),t("col",{attrs:{width:"200px"}})])}]};var l={components:{ReviewTemplate:s("VU/8")(i,a,!1,function(e){s("1+9Q")},"data-v-0505bb76",null).exports},data:function(){return{activeName:"first"}},methods:{handleClick:function(e,t){}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"order-box"},[s("el-tabs",{staticClass:"tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"我的评价",name:"first"}},[s("review-template",{attrs:{b:"1"}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"来自卖家的评价",name:"second"}},[s("review-template",{attrs:{b:"2"}})],1),e._v(" "),s("el-tab-pane",{attrs:{name:"six"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-delete"}),e._v("评价回收站")])])],1)],1)},staticRenderFns:[]};var r=s("VU/8")(l,n,!1,function(e){s("0yah"),s("3+4k")},"data-v-9cadba2e",null);t.default=r.exports},"/59Y":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAbCAIAAAAPqBNFAAABq0lEQVRIDe1TO0sDQRi8Uw8TOUWToIiPSkgKtVQQwVpErCwtLawt/A0W1oJW/gQLsbZURAsFRewkhEjigwg5CXLOOfq5bHaPa67Lcizfzs7M7s3uumEYOim0rhQ8I8uOL4NNK4ce27kdTvRzavOpgSJ+aDDBPWtvB+N+NeM014tXiz5rDOUDwikgqNvlQBwjSmUQBPRSrdUa7jZfa77h0fX7YGaoGb2atdrHccFHgR61/PVdpSy1Vlh9G7m+7Fv4mnU1AYZcY2C1OHb5v4ZGs/qC522UyOY2ZbPccsxmI5UxX4DMEeeGEJmyFALawo07N561OHIZ9OIuiHFnbuTd1p7/YmWU+PHdEW+n2mIvIHXDP2ereZh9QeJDkJsA5L77s/TVS73gfDWaKYZWX406s5UhcrMfaFPGofkdL+39PmJozrajd5yb8vKF0XqtQheVIBxOsbfes+WV6dmFFkiahSBC4MKqKWqz78tj6+K8Xn6YpDU1c/N5EQMnAUwB1cKaLwLFv4MKJQts8PTkVhVjyha31VfVq2sAt3mpkkS+qiBhbc43oTiG1vFlON/R6XnPaZHOGgAAAABJRU5ErkJggg=="},"0yah":function(e,t){},"1+9Q":function(e,t){},"3+4k":function(e,t){},"8Env":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAaCAIAAADE9MDgAAABq0lEQVRIDe2SvUoDQRSFd/OnjY2xCcYfULBRSwUtUgffwDew1efQ1jfwDcQ6hYW22igKEQ1pjI2NJibrt5xwGTaZIU0KwWVZ7t4557t37kycJEk0hSc3BWaK/OdqsNOaQyFwbg9nw6obxwNk4d8MJ/bdMyhLtXxpMb2FzxeD6kopXu3LnDTzby/dtcO0arcVvzb6KuyiQ3MQ9Pu6QAFA4HAKSoY8rzQuUXGIiwLnzP4PLENTgFg1RnGWCXHZI1DQsMygQBlW0WSW9BvimkENqmXF7rhN5gbec0PkHh1dc25MkwYZAp0i8B0aS95+gdIUZ42ZF5Bivtq+oGjs/rn9hu4vDVYj0Olw2X7ULibNOGrnuq0BdFGkcYnDvO/+sqxGIBoFdFTpyWn50cuLIDRf+e27dTSr+O78y5K+wDuH2umceRonn8Tz68XyQqXz3lbeFZCRxizec0NRP9jc3kt3nUFYxgQZKAIv9+Opd3vTaT0uC42UZ2e3rIAveQlQWtKC0HwZKHtHilMBDV5d3ptZS2PHHeK6frcG+bEsVz8p1/VMEnvnO4k5oPlr3F+XKOdG+10LSwAAAABJRU5ErkJggg=="},V2KC:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAIAAAASrSP9AAABWklEQVRIDe2UIU/DUBSFGRkJgpkNg0GRqm1iczMESToMfwCN5nfsR8wvM5snmLlVTFaSkBpQoECU05zk5OVxS18hE0vWNC/n3b773ZvT2zbyPD/YwnW4BWaB3HNpbPM//t5Oo7fXjITO6dn8LhXt7/5eTlqCXsddESka4XOG7txkQPujL0Y2q6Onh3f3aZAPHlH5wEl7orpfQV37GETLXpuih/rrQpGMrcwVyxUV3PHN+HMW4YZw0yp1qQ8CpR8bUKKTPlbo9PGZUMwDBMbLdMPgkjgcDNfJmgiioUGnJr13f9y+KF7dT5dtHwDFaawUwKlfCtbDqlFThMLnolmw4jj2zmmLfosyV+eKmMLn4hChQrNlMxnBl9QuYHDLELXiQdzfWzbr2d9xkiRZVvyoMBKCum/M1UHc5WKpyYVGDrfU3hZDVvbVGfNr1q8bDPK3LhTn91yatms+fANPGoO6Sw6f5QAAAABJRU5ErkJggg=="}});
//# sourceMappingURL=4.ade2f4e2a9a9ed797bac.js.map